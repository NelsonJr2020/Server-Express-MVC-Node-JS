<!-- views/posts.ejs -->

<!DOCTYPE html>
<html>
    <!-- CÓDIGO DE HEAD -->
    <%- include('partials/head') %>
    <body>
        <!-- CÓDIGO DE NAVBAR -->
        <%- include('partials/navbar') %>
        <!-- CONTENEDOR -->
        <div class="container">
            <!-- MENSAJE -->
            <div class="text-center" id="message"><%= message %></div>
            <div class="d-flex justify-content-end create-post">
                <a href="/post/create/<%= userId %>" class="circle-button"><span class="plus-sign">+</span></a>
            </div>
            <!-- TABLA -->
            <table class="table table-sm table-warning table-striped table-hover">    
                <thead>
                    <td>#</td>
                    <td>Titulo</td>
                    <td>Contenido</td>
                    <td>Foto</td>
                    <td>Fecha</td>
                    <td>Link</td>
                </thead>
                <tbody>
                    <% posts.forEach((post, index) => { %>
                        <tr>
                            <td>#<%= post.guid %></td>
                            <td><%= post.title %></td>
                            <td>
                                <button class="btn btn-link" data-toggle="collapse" data-target="#row<%= index %>">
                                    Ver Contenido
                                </button>
                                <div id="row<%= index %>" class="collapse">
                                    <%= post.content %>
                                </div>
                            </td>
                            <td><div class="image-td"><img src="<%= post.img %>" /></div></td>
                            <td><%= post.datePost %></td>
                            <td><a href="post/<%= post.guid %>"><button class="btn btn-success leer">Ver</button></a></td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        </div>
        <!-- CÓDIGO DE FOOTER -->
        <%- include('partials/footer') %>
        <!-- SCRIPTS -->
        <script src="/assets/bootstrap/popper.min.js"></script>
        <script src="/assets/bootstrap/bootstrap.bundle.min.js"></script>
        <script src="/assets/js/tools.js"></script>
    </body>
</html>